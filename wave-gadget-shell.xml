<Module>
  <ModulePrefs title="Title" height="100">
    <Require feature="rpc"/>
  </ModulePrefs>

  <Content type="html">
  <![CDATA[

  <script type="text/javascript" src="http://wave-api.appspot.com/public/wave.js"></script>
  <script type="text/javascript">
    function assignTitle() 
    {
      var title = document.getElementById('new_title').value;
      var state = wave.getState();
      var delta = {};
      delta['title'] = title;
      state.submitDelta(delta);
    }

    function render()
    {
      if(!wave.getState())
      {
        return;
      }
      var state = wave.getState();
      var title = state.get('title', false);
      if(title)
      {
        document.getElementById('title_question').innerHTML = title;
      }
    }

    function init()
    {
      if(wave && wave.isInWaveContainer())
      {
        wave.setStateCallback(render);
        wave.setParticipantCallback(render);
      }
    }

    gadgets.util.registerOnLoadHandler(init);
  </script>
  <div id="title_question">
    <span id="poll_title">What is the poll question?</span>
    <br />
    <input id="new_title" size="30">
    <button id="butCount" onclick="assignTitle()">Start the poll</button><br/>
  </div>

]]>
</Content>
</Module>